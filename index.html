<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>$BASE — Withdrawal (DEMO)</title>
  <style>
    :root{
      --brand-blue:#0052ff;
      --white:#ffffff;
      --muted:#e6f0ff;
      --surface:#0a3bd6;
      --danger:#ff6b6b;
      --success:#2dd36f;
      --card-radius:18px;
      --control-radius:8px;
      --shadow:0 6px 24px rgba(2,10,60,0.25);
      --max-width:460px;
      --font: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:var(--font);-webkit-font-smoothing:antialiased}
    body{
      display:flex;
      align-items:center;
      justify-content:center;
      background: linear-gradient(180deg, #0b3bff 0%, #0036b8 100%);
      padding:20px;
      color:var(--white);
    }

    .app{
      width:100%;
      max-width:var(--max-width);
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border-radius:var(--card-radius);
      padding:26px;
      box-shadow:var(--shadow);
      border: 1px solid rgba(255,255,255,0.06);
      position:relative;
      overflow:hidden;
    }

    .demo-pill{
      position:absolute;
      top:14px;
      right:14px;
      background:rgba(0,0,0,0.25);
      padding:6px 10px;
      border-radius:999px;
      font-weight:700;
      font-size:0.82rem;
      color: #fff;
      border:1px solid rgba(255,255,255,0.06);
    }

    .brand{
      text-align:left;
      font-size:1.6rem;
      font-weight:800;
      margin:4px 0 6px 0;
      letter-spacing:0.6px;
    }
    .subtitle{color:rgba(255,255,255,0.9);font-size:0.95rem;margin:0 0 18px 0}

    .amount{
      text-align:center;
      font-size:1.9rem;
      font-weight:800;
      margin:6px 0 18px 0;
      color:var(--white);
    }

    .swipe{
      display:flex;
      align-items:center;
      justify-content:center;
      background:var(--white);
      color:var(--brand-blue);
      padding:12px;
      border-radius:999px;
      font-weight:800;
      cursor:pointer;
      user-select:none;
      box-shadow:0 6px 18px rgba(0,0,0,0.12);
      transition:transform .12s ease;
      margin-bottom:16px;
    }
    .swipe:active{transform:translateY(1px)}
    .muted{color:rgba(255,255,255,0.9)}
    .section{display:none}
    .visible{display:block}

    form label{display:block;font-size:0.88rem;color:rgba(255,255,255,0.95);margin:8px 0 6px}
    select,input[type="text"],input[type="number"]{
      width:100%;
      padding:12px 14px;
      border-radius:10px;
      border: none;
      outline:none;
      font-size:1rem;
      margin-bottom:12px;
      background:rgba(255,255,255,0.98);
      color:#003056;
    }

    .control-row{display:flex;gap:12px}
    .button{
      width:100%;
      padding:12px 14px;
      border-radius:10px;
      border:none;
      cursor:pointer;
      font-weight:800;
      font-size:1rem;
      background:var(--white);
      color:var(--brand-blue);
      transition:opacity .12s ease, transform .08s ease;
    }
    .button:disabled{opacity:.6;cursor:not-allowed}

    .info{font-size:0.92rem;color:rgba(255,255,255,0.95);text-align:center;margin-top:8px}

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:12px;
      border:1px solid rgba(255,255,255,0.04);
      margin-bottom:12px;
    }

    .timer{text-align:center;font-weight:800;margin-top:8px;font-size:1.02rem}
    .error{color:var(--danger);font-weight:800;text-align:center;margin-top:8px}
    .support{color:rgba(255,255,255,0.95);text-align:center;margin-top:6px;font-size:0.92rem}

    /* modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.55);display:none;align-items:center;justify-content:center;z-index:60}
    .modal{background:var(--white);color:#04325b;padding:18px;border-radius:12px;max-width:460px;width:92%;box-shadow:0 12px 40px rgba(2,10,60,0.3)}
    .modal h3{margin:0 0 12px 0}
    .code{background:#0f1720;color:#fff;padding:10px;border-radius:8px;font-weight:700;word-break:break-all;margin-bottom:12px}
    .qr{width:100%;height:160px;background:linear-gradient(45deg,#e6e9ff,#cfe3ff);border-radius:8px;display:flex;align-items:center;justify-content:center;color:#003056;font-weight:700;margin-bottom:12px}
    .modal .button{background:var(--brand-blue);color:var(--white)}
    .row{display:flex;gap:8px}

    /* success banner */
    .success-banner{background:linear-gradient(90deg,#1bd97b,#10b26b);color:#05331f;padding:8px;border-radius:10px;text-align:center;font-weight:700;margin-top:12px}

    @media (max-width:420px){
      .brand{font-size:1.3rem}
      .amount{font-size:1.6rem}
    }
  </style>
</head>
<body>
  <main class="app" role="main" aria-labelledby="brandHeading">
    <div class="demo-pill">DEMO MODE — DO NOT SEND REAL FUNDS</div>

    <h1 id="brandHeading" class="brand">$BASE</h1>
    <p class="subtitle">Secure withdrawal simulator — for demonstration and UI testing only.</p>

    <div class="amount" id="displayAmount">$30,000 USDT</div>

    <div id="swipeBtn" class="swipe" role="button" tabindex="0" aria-pressed="false" aria-label="Swipe to confirm">
      → Swipe to confirm
    </div>

    <!-- Preview / Form -->
    <section id="preview" class="section card" aria-hidden="true">
      <h2 style="margin:0 0 8px;font-size:1.05rem">Transaction Preview</h2>

      <label for="cryptoSelect">Withdrawal Currency</label>
      <select id="cryptoSelect" aria-label="Select cryptocurrency">
        <option value="" disabled selected>Select currency</option>
        <option>BTC</option>
        <option>ETH</option>
        <option selected>USDT</option>
        <option>BNB</option>
        <option>SOL</option>
        <option>DOGE</option>
      </select>

      <label for="receiveAddress">Receiving Address</label>
      <input id="receiveAddress" type="text" placeholder="Enter receiving address (wallet)" aria-label="Receiving address" />

      <label for="withdrawAmount">Withdrawal Amount</label>
      <input id="withdrawAmount" type="text" value="30,000 USDT" readonly aria-label="Withdrawal amount" />

      <div class="info">Network and chain fees are displayed during the simulated process. This is a demo only.</div>

      <button id="processBtn" class="button" disabled>PROCESS WITHDRAWAL</button>
    </section>

    <!-- Processing -->
    <section id="processing" class="section card" aria-hidden="true">
      <p class="muted" style="text-align:center;margin:0">Your withdrawal is being prepared and routed through our secure vault.</p>
      <div class="timer" id="timer" aria-live="polite">Processing: 0:40</div>
      <div class="info" style="margin-top:10px">This demo simulates a 40-second processing window with responsive feedback.</div>
    </section>

    <!-- Received -->
    <section id="received" class="section card" aria-hidden="true">
      <button id="receivedBtn" class="button" disabled>I HAVE RECEIVED</button>
      <p class="muted" style="margin-top:10px;text-align:center">If you already received the funds, confirm here. Otherwise follow the guided steps.</p>
    </section>

    <!-- Error / TXID required (DEMO) -->
    <section id="error" class="section card" aria-hidden="true">
      <div style="text-align:center">
        <div class="error">⚠️ BLOCKCHAIN VAULT CODE REQUIRED</div>
        <p class="support">A vault verification code is required to complete this simulated withdrawal. In this demo a handling fee of <strong>$180 (simulation)</strong> is shown to illustrate fee handling.</p>
      </div>

      <div style="margin-top:10px">
        <button id="payNowBtn" class="button">GET PAYMENT ADDRESS (DEMO)</button>
      </div>

      <p class="support" style="margin-top:12px;font-size:0.9rem">Important: This is a simulation only. Do not send real funds. The flow below simply demonstrates UI states and timing.</p>
    </section>

    <!-- Success (hidden until simulated arrival) -->
    <section id="success" class="section card" aria-hidden="true">
      <div class="success-banner" id="successBanner">SIMULATION: $30,000 USDT ARRIVED — Funds credited to your address</div>
      <p class="muted" style="margin-top:10px;text-align:center">This is a demo confirmation. In production, transaction details and txid would appear here.</p>
    </section>
  </main>

  <!-- Modal: Demo payment address -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document" aria-labelledby="modalTitle">
      <h3 id="modalTitle">Demo Payment Address & Fee</h3>
      <p style="margin:0 0 8px 0">Fee (demo): <strong>$180</strong></p>

      <div class="code" id="demoAddress">DEMO-ADDRESS-1A2B3C4D5E6F (do not use)</div>

      <div class="qr">QR / Placeholder (Demo)</div>

      <div style="display:flex;gap:8px;">
        <button id="copyAddrBtn" class="button" style="flex:1;background:#0052ff;color:#fff">Copy Address</button>
        <button id="simulatePaidBtn" class="button" style="flex:1;background:#0bb27a;color:#fff">I PAID (SIMULATE)</button>
      </div>

      <div style="margin-top:10px;text-align:right">
        <button id="closeModal" class="button" style="background:#eef2ff;color:#003056">Close</button>
      </div>
    </div>
  </div>

  <script>
    // Demo-only script: simulates the described flow but is explicitly non-production.
    (function(){
      const swipeBtn = document.getElementById('swipeBtn');
      const preview = document.getElementById('preview');
      const processing = document.getElementById('processing');
      const received = document.getElementById('received');
      const errorSection = document.getElementById('error');
      const success = document.getElementById('success');

      const cryptoSelect = document.getElementById('cryptoSelect');
      const receiveAddress = document.getElementById('receiveAddress');
      const processBtn = document.getElementById('processBtn');
      const timerEl = document.getElementById('timer');
      const receivedBtn = document.getElementById('receivedBtn');
      const payNowBtn = document.getElementById('payNowBtn');

      const modalBackdrop = document.getElementById('modalBackdrop');
      const simulatePaidBtn = document.getElementById('simulatePaidBtn');
      const copyAddrBtn = document.getElementById('copyAddrBtn');
      const closeModal = document.getElementById('closeModal');

      function showSection(el){
        [preview, processing, received, errorSection, success].forEach(s=>{
          if(s===el){ s.classList.add('visible'); s.setAttribute('aria-hidden','false'); }
          else { s.classList.remove('visible'); s.setAttribute('aria-hidden','true'); }
        });
      }

      // initial state: only swipe visible
      showSection(null);

      // swipe activation
      function activateSwipe(){
        swipeBtn.setAttribute('aria-pressed','true');
        showSection(preview);
      }
      swipeBtn.addEventListener('click', activateSwipe);
      swipeBtn.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); activateSwipe(); } });

      // validation
      function validateForm(){
        const cur = cryptoSelect.value !== '';
        const addr = receiveAddress.value.trim().length >= 10; // minimal demo check
        processBtn.disabled = !(cur && addr);
      }
      cryptoSelect.addEventListener('change', validateForm);
      receiveAddress.addEventListener('input', validateForm);

      // begin processing: 40 seconds demo
      let processingInterval = null;
      processBtn.addEventListener('click', startProcessing);
      function startProcessing(){
        showSection(processing);
        let time = 40;
        timerEl.textContent = formatTime(time);
        // clear any previous
        if(processingInterval) clearInterval(processingInterval);
        processingInterval = setInterval(()=>{
          time--;
          if(time <= 0){
            clearInterval(processingInterval);
            showSection(received);
            startReceivedDelay();
          } else {
            timerEl.textContent = formatTime(time);
          }
        }, 1000);
      }
      function formatTime(seconds){
        const m = Math.floor(seconds/60);
        const s = seconds % 60;
        return `Processing: ${m}:${s < 10 ? '0' : ''}${s}`;
      }

      // Received screen: enable confirm after short delay (demo)
      function startReceivedDelay(){
        let countdown = 6; // short safety delay for demo (6s)
        receivedBtn.disabled = true;
        const interval = setInterval(()=>{
          countdown--;
          if(countdown <= 0){
            clearInterval(interval);
            receivedBtn.disabled = false;
            // clicking leads to error screen in this demo
            receivedBtn.onclick = ()=> showSection(errorSection);
          }
        }, 1000);
      }

      // Pay now opens demo modal to "get payment address"
      payNowBtn.addEventListener('click', ()=>{
        openModal();
      });

      function openModal(){
        modalBackdrop.style.display = 'flex';
        modalBackdrop.setAttribute('aria-hidden','false');
      }
      function closeModalFn(){
        modalBackdrop.style.display = 'none';
        modalBackdrop.setAttribute('aria-hidden','true');
      }
      closeModal.addEventListener('click', closeModalFn);

      // copy address (demo)
      copyAddrBtn.addEventListener('click', ()=>{
        const demoAddress = document.getElementById('demoAddress').textContent;
        try {
          navigator.clipboard.writeText(demoAddress);
          copyAddrBtn.textContent = 'Copied';
          setTimeout(()=> copyAddrBtn.textContent = 'Copy Address', 2000);
        } catch(e){
          // fallback
          alert('Demo address: ' + demoAddress);
        }
      });

      // Simulate payment completion: after pressing "I PAID (SIMULATE)",
      // we simulate an 11-second arrival and then show success banner.
      simulatePaidBtn.addEventListener('click', ()=>{
        closeModalFn();
        showSection(processing);
        // Short "verifying payment" phase
        timerEl.textContent = 'Verifying payment...';
        // Simulate immediate verification then 11-second arrival countdown
        setTimeout(()=>{
          let arrival = 11;
          timerEl.textContent = `Arriving in: ${arrival}s`;
          const arrivalInterval = setInterval(()=>{
            arrival--;
            if(arrival <= 0){
              clearInterval(arrivalInterval);
              // show success
              showSection(success);
              // You may want to update tx details in a real app
            } else {
              timerEl.textContent = `Arriving in: ${arrival}s`;
            }
          }, 1000);
        }, 800); // small pause to feel responsive
      });

      // accessibility: close modal on backdrop click
      modalBackdrop.addEventListener('click', (e)=>{
        if(e.target === modalBackdrop) closeModalFn();
      });

      // Ensure the demo's process button starts disabled until valid inputs
      (function init(){
        processBtn.disabled = true;
      })();

      // Prevent form-like enter submit from navigating
      window.addEventListener('keydown', function(e){
        if(e.key === 'Enter' && document.activeElement && (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'SELECT')) {
          if(!processBtn.disabled && document.activeElement !== processBtn){
            e.preventDefault();
            startProcessing();
          }
        }
      });

    })();
  </script>
</body>
</html>
